<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Engines</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Engines</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/vendor/plugins/engines/lib/engines_rb.html">
                vendor/plugins/engines/lib/engines.rb
                </a>
        <br />
                <a href="../files/vendor/plugins/engines/lib/engines/plugin/list_rb.html">
                vendor/plugins/engines/lib/engines/plugin/list.rb
                </a>
        <br />
                <a href="../files/vendor/plugins/engines/lib/engines/plugin/loader_rb.html">
                vendor/plugins/engines/lib/engines/plugin/loader.rb
                </a>
        <br />
                <a href="../files/vendor/plugins/engines/lib/engines/plugin/locator_rb.html">
                vendor/plugins/engines/lib/engines/plugin/locator.rb
                </a>
        <br />
                <a href="../files/vendor/plugins/engines/lib/engines/plugin_rb.html">
                vendor/plugins/engines/lib/engines/plugin.rb
                </a>
        <br />
                <a href="../files/vendor/plugins/engines/lib/engines/assets_rb.html">
                vendor/plugins/engines/lib/engines/assets.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
An instance of <a href="Engines/Plugin.html">Plugin</a> is created for each
plugin loaded by <a href="Rails.html">Rails</a>, and stored in the
<tt>Engines.plugins</tt> PluginList (see
Engines::RailsExtensions::RailsInitializer for more details).
</p>
<pre>
  Engines.plugins[:plugin_name]
</pre>
<p>
Other properties of the <a href="Engines/Plugin.html">Plugin</a> instance
can also be set.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000002">init</a>&nbsp;&nbsp;
      <a href="#M000004">load_extensions</a>&nbsp;&nbsp;
      <a href="#M000003">logger</a>&nbsp;&nbsp;
      <a href="#M000007">mirror_files_from</a>&nbsp;&nbsp;
      <a href="#M000006">mix_code_from</a>&nbsp;&nbsp;
      <a href="#M000005">select_existing_paths</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Module <a href="Engines/Assets.html" class="link">Engines::Assets</a><br />
Module <a href="Engines/RailsExtensions.html" class="link">Engines::RailsExtensions</a><br />
Module <a href="Engines/Testing.html" class="link">Engines::Testing</a><br />
Class <a href="Engines/Plugin.html" class="link">Engines::Plugin</a><br />

    </div>




      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="#M000002" class="method-signature">
          <span class="method-name">init</span><span class="method-args">(initializer)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000002-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000002-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/engines/lib/engines.rb, line 84</span>
84:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init</span>(<span class="ruby-identifier">initializer</span>)
85:       <span class="ruby-identifier">load_extensions</span>
86:       <span class="ruby-constant">Engines</span><span class="ruby-operator">::</span><span class="ruby-constant">Assets</span>.<span class="ruby-identifier">initialize_base_public_directory</span>
87:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000004" class="method-detail">
        <a name="M000004"></a>

        <div class="method-heading">
          <a href="#M000004" class="method-signature">
          <span class="method-name">load_extensions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000004-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000004-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/engines/lib/engines.rb, line 93</span>
93:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load_extensions</span>
94:       <span class="ruby-identifier">rails_extensions</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">require</span> <span class="ruby-node">&quot;engines/rails_extensions/#{name}&quot;</span> }
95:       <span class="ruby-comment cmt"># load the testing extensions, if we are in the test environment.</span>
96:       <span class="ruby-identifier">require</span> <span class="ruby-value str">&quot;engines/testing&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RAILS_ENV</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;test&quot;</span>
97:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000003" class="method-detail">
        <a name="M000003"></a>

        <div class="method-heading">
          <a href="#M000003" class="method-signature">
          <span class="method-name">logger</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000003-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000003-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/engines/lib/engines.rb, line 89</span>
89:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">logger</span>
90:       <span class="ruby-constant">RAILS_DEFAULT_LOGGER</span>
91:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000007" class="method-detail">
        <a name="M000007"></a>

        <div class="method-heading">
          <a href="#M000007" class="method-signature">
          <span class="method-name">mirror_files_from</span><span class="method-args">(source, destination)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
A general purpose method to mirror a directory (<tt>source</tt>) into a
destination directory, including all files and subdirectories. Files will
not be mirrored if they are identical already (checked via
FileUtils#identical?).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000007-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000007-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/engines/lib/engines.rb, line 138</span>
138:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mirror_files_from</span>(<span class="ruby-identifier">source</span>, <span class="ruby-identifier">destination</span>)
139:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">source</span>)
140:       
141:       <span class="ruby-comment cmt"># TODO: use Rake::FileList#pathmap?    </span>
142:       <span class="ruby-identifier">source_files</span> = <span class="ruby-constant">Dir</span>[<span class="ruby-identifier">source</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;/**/*&quot;</span>]
143:       <span class="ruby-identifier">source_dirs</span> = <span class="ruby-identifier">source_files</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">d</span>) }
144:       <span class="ruby-identifier">source_files</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">source_dirs</span>
145:       
146:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">source_files</span>.<span class="ruby-identifier">empty?</span>
147:         <span class="ruby-identifier">base_target_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">destination</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">source_files</span>.<span class="ruby-identifier">first</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value str">''</span>))
148:         <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">base_target_dir</span>)
149:       <span class="ruby-keyword kw">end</span>
150:       
151:       <span class="ruby-identifier">source_dirs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
152:         <span class="ruby-comment cmt"># strip down these paths so we have simple, relative paths we can</span>
153:         <span class="ruby-comment cmt"># add to the destination</span>
154:         <span class="ruby-identifier">target_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">destination</span>, <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value str">''</span>))
155:         <span class="ruby-keyword kw">begin</span>        
156:           <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">target_dir</span>)
157:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
158:           <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Could not create directory #{target_dir}: \n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">e</span>
159:         <span class="ruby-keyword kw">end</span>
160:       <span class="ruby-keyword kw">end</span>
161:       
162:       <span class="ruby-identifier">source_files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
163:         <span class="ruby-keyword kw">begin</span>
164:           <span class="ruby-identifier">target</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">destination</span>, <span class="ruby-identifier">file</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value str">''</span>))
165:           <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">target</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">identical?</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">target</span>)
166:             <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">target</span>)
167:           <span class="ruby-keyword kw">end</span> 
168:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
169:           <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Could not copy #{file} to #{target}: \n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">e</span> 
170:         <span class="ruby-keyword kw">end</span>
171:       <span class="ruby-keyword kw">end</span>  
172:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000006" class="method-detail">
        <a name="M000006"></a>

        <div class="method-heading">
          <a href="#M000006" class="method-signature">
          <span class="method-name">mix_code_from</span><span class="method-args">(*types)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The engines plugin will, by default, mix code from controllers and helpers,
allowing application code to override specific methods in the corresponding
controller or helper classes and modules. However, if other file types
should also be mixed like this, they can be added by calling this method.
For example, if you want to include &quot;things&quot; within your plugin
and override them from your applications, you should use the following
layout:
</p>
<pre>
  app/
   +-- things/
   |       +-- one_thing.rb
   |       +-- another_thing.rb
  ...
  vendor/
      +-- plugins/
               +-- my_plugin/
                          +-- app/
                               +-- things/
                                       +-- one_thing.rb
                                       +-- another_thing.rb
</pre>
<p>
The important point here is that your &quot;things&quot; are named
&lt;whatever&gt;_thing.rb, and that they are placed within
plugin/app/things (the pluralized form of &#8216;thing&#8217;).
</p>
<p>
It&#8216;s important to note that you&#8216;ll also want to ensure that the
&quot;things&quot; are on your load path by including them in <a
href="Rails.html">Rails</a> load path mechanism, e.g. in init.rb:
</p>
<pre>
 ActiveSupport::Dependencies.load_paths &lt;&lt; File.join(File.dirname(__FILE__), 'app', 'things'))
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000006-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000006-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/engines/lib/engines.rb, line 131</span>
131:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mix_code_from</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">types</span>)
132:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">code_mixing_file_types</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">types</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">singularize</span> }
133:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000005" class="method-detail">
        <a name="M000005"></a>

        <div class="method-heading">
          <a href="#M000005" class="method-signature">
          <span class="method-name">select_existing_paths</span><span class="method-args">(paths)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000005-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000005-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/engines/lib/engines.rb, line 99</span>
 99:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select_existing_paths</span>(<span class="ruby-identifier">paths</span>)
100:       <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>) }
101:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>